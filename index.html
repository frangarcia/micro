
<!doctype html>
<html>
<head>
    <meta charset="utf-8">
    <meta property="og:title" content="Title">
    
    <meta property="og:description" content="Caption">

    
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">
    <meta name="viewport" content="width=device-width,initial-scale=1">

    <title>Drink Picker</title>
    <style>
        body, html { margin: 0; padding: 0; }
        #content { position:relative; }
    </style>
</head>
<body>
    <div id="content">
        <script src="https://xd.wayin.com/ui/ngx.embed.min.js"></script>
        <iframe width="100%" height="100%" frameborder="0" scrolling="no" allowTransparency="true"
            id="ngxFrame214203"
        ></iframe>
    </div>
    <script>
        function getQueryStringValue (key) {
            let value = '';
            try {
                let tmp = [];
                var items = location.search.substr(1).split("&");
                for (var index = 0; index < items.length; index++) {
                    tmp = items[index].split("=");
                    if (tmp[0] === key) value = decodeURIComponent(tmp[1]);
                }
            } catch (e) {
                console.error('Malformed URL, likely caused by illegal characters in the query string.');
            }
            return value;
        }

        var iframeUrl = "https://xd.wayin.com/display/container/dc/d013e982-ecf8-48a8-b7f6-02da9c315d71" + '?mode=responsive';
        var iframe = document.querySelector("#ngxFrame214203");
        var whitelist = ['source', 'channel', 'medium'];
        var params = [];
        for( var i = 0; i < whitelist.length; i++ ) {
            var param = getQueryStringValue(whitelist[i]);
            if ( param ) params.push(whitelist[i] + '=' + param);
        }
        var paramStr = params.join('&');
        if (paramStr) {
            iframeUrl = iframeUrl + '&' + paramStr;
        }
        iframe.src = iframeUrl;

        NGX.Embed.registerEventHandler('app:ready', function() {
            var custId = getQueryStringValue('nc.customerid');
            var custIdType = getQueryStringValue('nc.customeridtype');
            if (custId) NGX.Embed.setCustomerID(custId, custIdType);
        });
    </script>
    
</body>
</html>
